<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}  {% endblock title%}</title>
     {% include '../includes/cssfiles.html' %}
</head>
  <body class="">
    <div id="wrapper">
         {% include '../includes/sidenav.html' %}
         <div id="page-wrapper" class="gray-bg dashbard-1">
            {% include '../includes/topnav.html' %}

             {% block body %}
             {% endblock %}

             {% include '../includes/footer.html' %}
         </div>
    </div>

      {% include '../includes/jsfiles.html' %}
        <script>
        window.CSRF_TOKEN = "{{ csrf_token }}";
        $.ajaxSetup({
            headers: {
                'X-CSRFToken': window.CSRF_TOKEN
            }
        });

       function toastrDisplay(type, msg) {
        toastr.options = {
          closeButton: true,
          progressBar: true,
          showMethod: "slideDown",
          timeOut: 7000,
        };
        if (type == "success") toastr.success(msg);
        else if (type == "error") toastr.error(msg);
      }

      function deleteRecordByAjax(deleteUrl,moduleName, tableName) {
        var deleteAlertStr = "You want to delete " + moduleName + "?";

        swal({
          title: "Are you sure?",
          text: deleteAlertStr,
          type: "warning",
          showCancelButton: true,
          confirmButtonColor: "#DD6B55",
          confirmButtonText: "Yes, Remove it!",
          cancelButtonText: "No, cancel!",
          showLoaderOnConfirm: true,
          allowOutsideClick: false,
          allowEscapeKey: false,
          preConfirm: function(email) {
            return new Promise(function(resolve, reject) {
              setTimeout(function() {
                jQuery.ajax({
                  url: deleteUrl,
                  type: "DELETE",
                  dataType: "json",

                  success: function(result) {
                    swal("success!", moduleName + " Deleted successfully.", "success");
<!--                    toastrDisplay("success", result.message);-->
                    tableName.draw(false);
                  },
                  error: function(xhr, status, error) {
                    console.log("error=>", error);
                    if (xhr.responseJSON && xhr.responseJSON.message != "") {
                      swal("ohh snap!", xhr.responseJSON.message, "error");
                    } else {
                      swal("ohh snap!", "Something went wrong", "error");
                    }
                    ajaxError(xhr, status, error);
                  },
                });
              }, 0);
            });
          },
        });
      }
  </script>

    {% block script %}
  {% endblock %}

</body>
</html>